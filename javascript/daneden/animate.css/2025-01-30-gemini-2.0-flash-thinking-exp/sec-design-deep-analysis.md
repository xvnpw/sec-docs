## Deep Security Analysis of animate.css Integration

### 1. Objective, Scope, and Methodology

**Objective:**

This deep analysis aims to provide a thorough security evaluation of integrating the animate.css library into a web application. The primary objective is to identify potential security vulnerabilities and risks introduced or exacerbated by the use of animate.css, focusing on the client-side security context. This analysis will delve into the architecture, components, and data flow relevant to animate.css usage, ultimately delivering actionable and tailored mitigation strategies to ensure the secure implementation of animations within the web application.

**Scope:**

The scope of this analysis is limited to the security considerations directly related to the integration and usage of the animate.css library within the web application project as described in the provided Security Design Review. It encompasses:

* **Codebase Analysis (Inferred):**  Analyzing the publicly available nature of animate.css and its CSS-based functionality to understand potential inherent vulnerabilities and attack vectors.
* **Integration Points:** Examining how animate.css interacts with the web application's components (HTML, JavaScript, Web Server, Web Browser) and identifying potential security implications at these integration points.
* **Dependency Risks:** Assessing the risks associated with relying on a third-party library, including vulnerability management, updates, and supply chain concerns.
* **Client-Side Security:** Focusing on client-side security threats such as CSS injection, Cross-Site Scripting (XSS) in indirect scenarios, and potential impacts on user experience and accessibility from a security perspective.
* **Mitigation Strategies:**  Developing specific, actionable, and tailored mitigation strategies applicable to the identified risks in the context of animate.css usage.

The scope explicitly excludes:

* **General Web Application Security:**  Broad security aspects of the web application that are not directly related to animate.css (e.g., server-side vulnerabilities, database security, business logic flaws) are outside the scope unless they are directly impacted by or interact with the use of animate.css.
* **Detailed Code Review of animate.css:**  A line-by-line code review of the animate.css library itself is not within the scope. The analysis will rely on the understanding of CSS functionality and publicly available information about the library.
* **Performance and Accessibility Analysis (Beyond Security Context):** While performance and accessibility are mentioned in the Business Risks, this analysis will only consider them insofar as they relate to security (e.g., denial of service through excessive animations, accessibility issues leading to user frustration and potential security oversights).

**Methodology:**

This deep analysis will employ the following methodology:

1. **Document Review:**  Thorough review of the provided Security Design Review document to understand the business context, security posture, existing controls, accepted risks, recommended controls, and security requirements.
2. **Architecture and Data Flow Inference:** Based on the C4 diagrams and descriptions in the Security Design Review, infer the architecture, components, and data flow relevant to animate.css integration. Focus on how animate.css is used within the web application and how data (specifically CSS class names and HTML structure) interacts with it.
3. **Threat Modeling (Component-Based):** Break down the system into key components (Web Application, animate.css Library, Web Browser, Web Server, etc.) and analyze potential threats associated with each component and their interactions, specifically in the context of animate.css.
4. **Vulnerability Identification:** Identify potential vulnerabilities and security implications arising from the use of animate.css, considering common web application security risks and the specific nature of CSS-based animations.
5. **Risk Assessment (Qualitative):**  Qualitatively assess the identified risks based on their potential impact and likelihood in the context of the web application.
6. **Mitigation Strategy Development:**  Develop actionable, tailored, and specific mitigation strategies for each identified risk, focusing on practical implementation within the web application development lifecycle.
7. **Recommendation Prioritization:** Prioritize mitigation strategies based on their effectiveness and feasibility, considering the business priorities and accepted risks outlined in the Security Design Review.

### 2. Security Implications Breakdown by Key Components

Based on the Security Design Review and the nature of animate.css, the following key components and their security implications are identified:

**1. Web Application:**

* **Security Implication:** **CSS Injection Vulnerability:** If the web application dynamically constructs CSS class names based on user-controlled input and directly applies them to HTML elements without proper sanitization, it becomes vulnerable to CSS injection. An attacker could inject malicious CSS code through these class names, potentially altering the visual presentation of the page in unintended ways, leading to phishing attacks, defacement, or information disclosure (e.g., revealing hidden content). While animate.css itself doesn't directly cause this, its usage can be a context where dynamic class name manipulation might occur.
    * **Specific to animate.css:**  The library relies on CSS classes. If the application dynamically adds animate.css classes based on user input, this becomes a direct attack vector.
* **Security Implication:** **Dependency Management Risks:**  The web application depends on animate.css as a third-party library. This introduces risks associated with:
    * **Vulnerabilities in animate.css:**  Although less likely in a CSS-only library, vulnerabilities could be discovered in the future.
    * **Supply Chain Attacks:**  If the source of animate.css is compromised (e.g., CDN, package repository), malicious code could be injected into the library, affecting the web application.
    * **Outdated Library:**  Using an outdated version of animate.css might expose the application to known vulnerabilities or miss out on security improvements.
* **Security Implication:** **Performance and Availability Impact (Indirect Security):** Improper or excessive use of animations can degrade website performance, leading to slow loading times and a poor user experience. In extreme cases, this could be exploited for denial-of-service (DoS) attacks by overwhelming client-side resources. While not a direct security vulnerability in animate.css, it can impact the application's availability and user trust, which are indirectly related to security.
* **Security Implication:** **Accessibility Issues (Indirect Security/UX):**  Animations, if not implemented with accessibility in mind, can cause discomfort or seizures for users with vestibular disorders or cognitive impairments. This can lead to a negative user experience and potentially force users to disable JavaScript or CSS, which might bypass intended security features or degrade the application's functionality.

**2. animate.css Library Files:**

* **Security Implication:** **Integrity Compromise:** If the animate.css library files are served from a CDN or the web server is compromised, the integrity of these files could be at risk. An attacker could replace the legitimate animate.css files with malicious versions, potentially injecting malicious CSS or JavaScript (if they manage to inject JS through CSS vulnerabilities in browsers, though less likely in modern browsers).
    * **Specific to animate.css:** As a core component for visual presentation, compromised animate.css files can directly impact the user interface and potentially be used for phishing or defacement.
* **Security Implication:** **Vulnerabilities within the Library (Low Probability but Possible):** While less likely in a CSS-only library, there's a theoretical possibility of vulnerabilities within the CSS code itself that could be exploited by sophisticated attacks, although this is highly improbable in practice for animate.css.

**3. Web Browser:**

* **Security Implication:** **Browser Vulnerabilities:**  Web browsers themselves can have vulnerabilities that could be exploited in conjunction with CSS or JavaScript. While animate.css itself doesn't introduce browser vulnerabilities, the browser's rendering engine is responsible for processing the CSS, and vulnerabilities in this engine could theoretically be triggered by complex or malicious CSS. This is a general browser security concern, not specific to animate.css, but relevant in the overall client-side security context.
* **Security Implication:** **User-Controlled Browser Settings:** Users can disable CSS or JavaScript in their browsers. While this is a user choice, it can impact the intended functionality and visual presentation of the web application, including animations. From a security perspective, relying solely on client-side CSS or JavaScript for critical security controls is not advisable, as users can bypass them.

**4. Web Server & CDN (Optional):**

* **Security Implication:** **Compromised Server/CDN:** If the web server hosting the animate.css files or the CDN serving them is compromised, malicious files could be served to users, as mentioned in "animate.css Library Files" section.
* **Security Implication:** **Misconfiguration:**  Incorrect web server or CDN configuration could lead to security vulnerabilities, such as exposing sensitive files or allowing unauthorized access. While not directly related to animate.css, proper server security is crucial for serving any web application assets securely.

**5. Web Developer:**

* **Security Implication:** **Improper Implementation:** Developers might misuse animate.css, leading to security vulnerabilities. This includes:
    * **Dynamic Class Name Generation without Sanitization:** As mentioned in "Web Application" section, this is a primary risk.
    * **Over-reliance on Client-Side Security:** Developers might mistakenly rely on animations or CSS to implement security features that should be handled server-side or with more robust client-side mechanisms.
    * **Ignoring Security Best Practices:**  Lack of secure coding practices in the web application code that interacts with animate.css can introduce vulnerabilities.

**6. Build System & Deployment Environment:**

* **Security Implication:** **Compromised Build Pipeline:** If the build system is compromised, malicious code could be injected into the build artifacts, including animate.css or related application code. This is a supply chain risk.
* **Security Implication:** **Insecure Deployment:**  Deploying the web application and animate.css to an insecure deployment environment (e.g., unpatched web server, weak access controls) can expose the application to various attacks.

### 3. Architecture, Components, and Data Flow Inference

Based on the provided C4 diagrams and descriptions, and understanding the nature of animate.css, the architecture, components, and data flow can be inferred as follows:

**Architecture:** Client-Side Focused with Static Asset Delivery

The architecture is primarily client-side, centered around the web browser rendering HTML, CSS, and JavaScript. animate.css is a static asset (CSS file) delivered to the web browser.

**Components:**

1. **Web Browser:**  The user's browser requests and renders the web application. It's the client-side execution environment for HTML, CSS, and JavaScript, including animate.css.
2. **Web Application (Client-Side Code):**  Consists of HTML, CSS (including integration of animate.css), and JavaScript. It defines the structure, style, and behavior of the web page, utilizing animate.css classes to trigger animations.
3. **animate.css Library Files:**  CSS files containing the animation definitions. These are static assets served by the Web Server or CDN.
4. **Web Server:** Hosts and serves the static assets of the web application, including HTML, CSS (animate.css), and JavaScript files.
5. **CDN (Optional):**  Content Delivery Network that can cache and serve static assets like animate.css closer to users, improving performance.
6. **Web Developer:**  Develops the web application, integrates animate.css, and deploys the application.
7. **Build System (CI/CD):** Automates the build and deployment process, packaging the web application and its assets.
8. **Deployment Environment:**  The infrastructure where the web application is deployed and runs (Web Server, CDN).

**Data Flow:**

1. **Request:** The Web Browser requests the web application's HTML from the Web Server (or CDN).
2. **Delivery:** The Web Server (or CDN) delivers the HTML, CSS (including animate.css), and JavaScript files to the Web Browser.
3. **Rendering & Execution:** The Web Browser parses the HTML, CSS, and JavaScript. It applies the CSS styles, including those from animate.css. When HTML elements with animate.css classes are encountered (often triggered by JavaScript or initial HTML structure), the browser renders the defined animations.
4. **User Interaction (Optional):** User interactions within the web application might trigger JavaScript code that dynamically adds or removes animate.css classes to HTML elements, initiating or stopping animations.

**Data Flow Specific to animate.css:**

* **Static Asset Delivery:** animate.css files are delivered as static assets from the Web Server/CDN to the Web Browser.
* **CSS Class Application:** The web application's HTML and JavaScript code apply CSS classes defined in animate.css to HTML elements.
* **Animation Rendering:** The Web Browser's rendering engine interprets the CSS rules from animate.css and applies the animations to the targeted HTML elements.

**Key Security Data Flow Point:**

* **Dynamic CSS Class Name Generation (Potential Vulnerability):** If the web application dynamically generates CSS class names based on user input and applies them to HTML elements, this is a critical data flow point for potential CSS injection vulnerabilities.  The user input becomes part of the CSS class name data flow, and if not sanitized, can lead to malicious CSS injection.

### 4. Tailored Security Considerations and Specific Recommendations

Given the analysis and the nature of animate.css, here are tailored security considerations and specific recommendations for this project:

**Security Considerations Tailored to animate.css:**

1. **CSS Injection via Dynamic Class Names:**  The primary security concern is CSS injection if the application dynamically constructs CSS class names based on user input. This is especially relevant if animations are triggered or customized based on user actions or data.
2. **Dependency Integrity:**  Relying on a third-party library like animate.css introduces dependency risks. Ensuring the integrity and authenticity of the library files is crucial.
3. **Performance and Availability (Indirect Security):**  While not a direct vulnerability, excessive or poorly implemented animations can impact performance and availability, indirectly affecting user experience and potentially opening avenues for DoS-like scenarios.
4. **Accessibility and User Experience (Indirect Security/UX):**  Animations must be implemented with accessibility in mind to avoid negative user experiences, especially for users with disabilities. Poor accessibility can lead to user frustration and potentially force users to bypass security features.

**Specific Recommendations for animate.css Integration:**

1. **Input Sanitization for Dynamic Class Names:**
    * **Recommendation:** **Strictly avoid dynamically generating animate.css class names directly from user input without thorough sanitization.** If dynamic class manipulation is absolutely necessary, implement a whitelist approach. Define a limited set of allowed animation class names and only use those from the whitelist based on validated user input.
    * **Actionable Mitigation:**  Review all code sections where CSS classes, especially animate.css classes, are dynamically added or modified. Ensure that user input is never directly concatenated into class names. Implement input validation and sanitization to allow only predefined, safe class names.

2. **Subresource Integrity (SRI) for CDN Usage:**
    * **Recommendation:** If animate.css is served from a CDN, implement Subresource Integrity (SRI) to ensure the integrity and authenticity of the files.
    * **Actionable Mitigation:** When including animate.css from a CDN, generate the SRI hash for the specific version of the file being used and include the `integrity` attribute in the `<link>` tag. Regularly update the SRI hash when updating the animate.css version.

3. **Dependency Scanning and Regular Updates:**
    * **Recommendation:** Implement dependency scanning as part of the development process to check for known vulnerabilities in animate.css and other dependencies. Regularly monitor for updates to animate.css and apply them promptly.
    * **Actionable Mitigation:** Integrate a dependency scanning tool into the CI/CD pipeline. Subscribe to security advisories or watch the animate.css repository for updates. Establish a process for regularly updating dependencies, including animate.css, and testing the application after updates.

4. **CSS Linting and Best Practices:**
    * **Recommendation:** Integrate CSS linting tools into the development process to enforce CSS best practices and potentially identify security-related issues or inefficiencies in custom CSS that interacts with animate.css.
    * **Actionable Mitigation:** Configure and integrate a CSS linter (e.g., Stylelint) into the build process. Define linting rules that enforce best practices and potentially flag suspicious CSS patterns. Educate developers on secure CSS coding practices.

5. **Performance Monitoring and Optimization:**
    * **Recommendation:** Monitor the performance impact of animations on the web application. Optimize animation usage to minimize performance overhead and ensure a smooth user experience, especially on lower-powered devices.
    * **Actionable Mitigation:** Use browser developer tools to profile page load times and animation performance. Test animations on various devices and network conditions. Avoid excessive or overly complex animations that can degrade performance.

6. **Accessibility Considerations and Testing:**
    * **Recommendation:**  Design and implement animations with accessibility in mind. Provide options to reduce or disable animations for users who prefer or require it. Test the application with accessibility testing tools and with users with disabilities.
    * **Actionable Mitigation:** Follow accessibility guidelines (WCAG) related to animations. Provide a user preference setting to reduce or disable animations. Use `prefers-reduced-motion` media query to conditionally apply animations based on user settings. Conduct accessibility testing with tools and ideally with users with disabilities to ensure animations do not create usability barriers.

7. **Security Awareness for Developers:**
    * **Recommendation:**  Educate developers about the potential security risks associated with CSS injection and dependency management, specifically in the context of using animate.css.
    * **Actionable Mitigation:** Conduct security training for developers covering CSS injection vulnerabilities, secure coding practices for CSS and JavaScript, and dependency management best practices. Include animate.css specific examples in the training.

### 5. Actionable and Tailored Mitigation Strategies

The following table summarizes the actionable and tailored mitigation strategies for the identified threats, prioritized for immediate implementation:

| Threat                                      | Mitigation Strategy                                                                 | Actionable Steps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          